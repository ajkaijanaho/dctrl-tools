grep-dctrl (2.1.3) unstable; urgency=low

  * rc.c (find_ifile_by_exename): Fix EOF handling.
  * grep-dctrl.c (main): If no default file is found, use "-".
  * strutil.c (chomp): New function.
  * These fix a bug that is fuctionally equivalent to 
    bug#235785 (segfaults when using an unknown exe name or an empty config file)
    but is caused by legacy code not present in experimental, and thus this does
    not close it.
  * grep-dctrl.c (finish_atom): Run predicate_finish_atom even if there
    are no search fields.
    Closes: #234657 ("-e" causes matches to fail)

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Wed,  3 Mar 2004 21:21:56 +0200

grep-dctrl (2.1.2) unstable; urgency=low

  * debian/control (Build-Depends): Add version constraint >= 0.11-0 for
    gettext, due to the use of --copyright-holder, with thanks to Michael
    Schultheiss.
    Closes: #230399 (Needs to Build-Depend on versioned gettext)
  * Backport from experimental:
    - debian/control (Suggests): Add dselect
    - debian/control [Description]: Mention the specializations.
  * po/fi.po: Updated.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Wed, 11 Feb 2004 17:40:13 +0200

grep-dctrl (2.1.1) unstable; urgency=low

  * New German translation by Gerfried Fuchs.
  * grep-dctrl.c: Fix help message inconsistent punctuation and other
    minor message errors
    Closes: #229821 (some minor nitpicks with the po files)
  * Makefile (clean): Remove also *.pot
  * predicate.[ch], grep-dctrl.c: Check for malformed predicates.
    This is a kluge, but gets rid of certain assertion failures.
  * Update Catalan translation by Jordi Mallach.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Tue, 10 Feb 2004 20:41:32 +0200

grep-dctrl (2.1.0) unstable; urgency=low

  * Creating a 2.1 maintenance branch - patchlevel added to version number.
  * grep-dctrl.c (main): Use C99 %zi and not %i to print out size_t
    (size mismatch on 64-bit archs).
    Closes: #226569 (printf format problem in grep-dctrl.c)
  * grep-dctrl.c (struct arguments, enter_atom, parse_opt),
    grep-dctrl.1.cp (DIAGNOSTICS): Treat ')' on command line as a "soft"
    '--'; ie. if ')' is followed by a connective, continue predicate,
    otherwise finish it.
    Closes: #226477 (Misparses a file name following a closing paren as a
    pattern)
  * Catalan translation updated by Jordi Mallach.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Tue, 13 Jan 2004 20:14:43 +0200

grep-dctrl (2.0) unstable; urgency=low

  * The Polish Release.
  * Internationalized again,  thanks to Jordi Mallach for help
  * Now includes Catalan messages, courtesy of Jordi Mallach
  * Also includes Finnish messages (my own translation, with thanks to
    Tommi Vainikainen)
  * debian/NEWS: Moved old 1.10x-entries to debian/NEWS.superseded
  * debian/NEWS: Document everything since 1.9
  * debian/rules: ./NEWS is no longer installed, debian/NEWS is better
  * grep-dctrl.c (finish_atom): Zero args->num_search_fields.  This fixes
    a particularly nasty unreported bug, where the right-hand side of an
    --and was essentially ignored.
  * The above changes, along with the changes in 1.103 and 1.104,
    closes: #208646 (Unsuitable for testing)
  * debian/control [Build-Depends]: Add gettext
  * TODO: Updated.
  * grep-dctrl.1.cp: Updated messages in DIAGNOSTICS.
  * grep-dctrl.1.cp: Mention ara(1) in SEE ALSO.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Wed,  7 Jan 2004 03:09:44 +0200

grep-dctrl (1.104) unstable; urgency=low

  * grep-dctrl.c (parse_option [case 's']): free carg after use
  * grep-dctrl.c (parse_option): Replace remaining FIXME-tagged asserts
    with proper error checking
  * Bring back support for multiple -F options in one atom and multiple
    field names in one -F option:
    - grep-dctrl.c (struct arguments, leave, prim_enter): Allow an
      instruction sequence in the parser stack.
    - grep-dctrl.c (clone_atom): New function.
    - grep-dctrl.c (finish_atom, parse_option [case 'F']):
      Handle multiple field names.
    - grep-dctrl.1.cp: Remove note of the regression.
    - debian/NEWS: Note this change.
    This gets rid of one of the documented regressions.
  * grep-dctrl.c (options): Make --banner existence contingent on the
    BANNER #define.
  * grep-dctrl.c, predicate.h, predicate.c, grep-dctrl.1.cp: Add a new
    instruction, I_TRUE, and use it to implement --true.
  * grep-dctrl.c (to_stdout, parse_option [case 'C']): Implement -C.
    Closes: #207995 (grep-dctrl: -C: (PROGRAM ERROR) Option should have
    been recognized!?)
  * debian/control (Standards-Version): 3.6.1, no changes required.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Sat,  3 Jan 2004 20:54:36 +0200

grep-dctrl (1.103) unstable; urgency=low

  * grep_dctrl.c (banner, main, parse_option): Disable the banner.
  * predicate.c (predicate_finish_atom): Don't bail out if the field name
    is missing; instead, just don't add the missing field name to the
    trie.  Thanks to Jeff King for diagnosis and patch.
    Closes: #205998 (regex/eregex support produces no results)
  * grep-dctrl.c (main): Track whether any matches were found and choose
    exit status based on that.
    Closes: #216549 (Return 0 for success, 1 for failure, like grep does)
  * grep-dctrl.1.cp: Add grep-available and grep-status to NAME section
    and mention them in the SYNOPSIS.
    Closes: #199762 (mention grep-available in synopsys)
  * grep-dctrl.1.cp: Add dpkg available and status files to FILES section.
    Closes: #204781 (Add available and status file to FILES section on the
    man page)
  * Use the grep return value 2 for errors:
    - msg.h (fail, errors_reported, record_error): New function.
    - msg.h (line_message), msg.c (errors): Record any use of L_IMPORTANT 
      or above
    - Change exit(EXIT_FAILURE) to fail() everywhere.
    - Add record_error invocations where appropriate.
    Closes: #225806 (Return 2 for error, like grep does)
  * grep-dctrl.c (main): Check the file type and fail if necessary.
    Thanks to Tuomas Jormola.
    Closes: #212939 (Segfaults if there are directories in the input file list)
    Closes: #222461 (segfaults if given .* as the predicator)
  * grep-dctrl.c (parse_option): Replace the multiple -F/-P assert with a
    helpful error message.  
    Closes: #215182 (some man page examples fail)
  * grep-dctrl.1.cp (SEE ALSO): dpkg(1) -> dpkg(8), thanks to Frank
    Lichtenheld.
    Closes: #213297 (there is no dpkg(1) manpage, it's dpkg(8))
  * debian/copyright: Added 2004 to copyright years and recoded to UTF-8.
  * grep.dctrl.1.cp: Document the new -q | --quiet | --silent option
    and the exit value semantics.
  * debian/NEWS.Debian: New file.
  * Get rid of the build-time dependency to publib-dev by incorporating
    the required functions in grep-dctrl.  This is by request from Lars
    Wirzenius, who wants to get rid of publib-dev.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Thu,  1 Jan 2004 23:19:54 +0200

grep-dctrl (1.102) unstable; urgency=low

  * paragraph.c (para_parse_next) [case BODY_NEWLINE]: Do not declare eof
    on reading -1.
    Closes: #205933 (Silently ignores the last stanza if no trailing newline)

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Mon, 25 Aug 2003 18:46:04 +0300

grep-dctrl (1.101) unstable; urgency=low

  * fieldtrie.h (fieldtrie_count): New function.
  * paragraph.c (para_parse_next): Clear the fields too.
    Closes: #205373, #205376, #205295.
  * grep-dctrl.c (main): If no predicate is given, bail out.
    Closes: #205511.
  * grep-dctrl.c (dump_args): Use C99 %zi and not %i to print out size_t
    (size mismatch on 64-bit archs).
  * rc.c: #include "util.h"

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Fri, 15 Aug 2003 21:37:30 +0300

grep-dctrl (1.100) unstable; urgency=low

  * A (nearly) full rewrite (bumped minor version number to match)
  * Includes an annoying one-time-per-user banner asking for testing (will
    be removed in the future).
  * debian/control [Standards-Version]: Upgrade to 3.6.0.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Sun, 10 Aug 2003 18:33:05 +0300

grep-dctrl (1.12) unstable; urgency=low

  * matcher.c (find_field): Simplify code (this seems
    to be a bit faster, too).
  * This version was never uploaded.
  
 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Tue, 22 Apr 2003 19:33:09 +0300

grep-dctrl (1.11) unstable; urgency=low

  * The four-year near-anniversary overhaul.
  * debian/copyright: Add copyright years.
  * debian/copyright: Fix my snailmail address.
  * debian/{prerm,postinst}: Remove (they handled only the FHS transition).
  * debian/rules: Rewrote using my modernish rules helper.  Closes: #164652.
  * grep-dctrl.c: Don't use perror to report errors; instead use fprintf
    and strerror so that the file name is reported.  Closes: #162072.
  * grep-dctrl.1.cp: Fix manpage syntax error, thanks to Bill Allombert.
    Closes: #160521.
  * grep-dctrl.c, matcher.h, matcher.c, buffer.h, buffer.c:
    Implement -d switch, suggested by Chris Waters.  Closes: #106175.
  * po/fi.po: Updated
  * matcher.c: Don't display a blank field when fields are selected, as
    suggested by Horms.  Closes: #167365.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Sun, 16 Feb 2003 18:48:11 +0200

grep-dctrl (1.10) unstable; urgency=low

  * grep-dctrl.c, grep-dctrl.1.cp: Make -c synonymous with --count.
  * grep-dctrl.1.cp: Add Bill Allombert's example.  Closes: #145301.
  * debian/control [Standards-Version]: Upgrade to 3.5.6
      + debian/rules: Implement debug & nostrip

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Thu, 25 Jul 2002 21:44:28 +0300

grep-dctrl (1.9) unstable; urgency=low

  * intl/Makefile.in: We don't have a ../config.h.  Closes: #106001

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Mon, 30 Jul 2001 20:09:18 +0300

grep-dctrl (1.8) unstable; urgency=low

  * Fix manpage, closes: #102021

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Thu, 19 Jul 2001 19:40:55 +0300

grep-dctrl (1.7) unstable; urgency=low

  * Added copyright blurb to some source files that missed it.
  * grep-dctrl.c, matcher.[ch]: Implement multiple -F options,
    allows search in several fields at once.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Sat, 20 May 2000 18:32:00 +0300

grep-dctrl (1.6) unstable; urgency=low

  * Disable the -c switch to allow its meaning to be changed
    in woody+1.
  * grep-dctrl.1.cp: Added COMPATIBILITY section, based on
    the file Compatibility.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Wed, 10 May 2000 15:29:02 +0300

grep-dctrl (1.5) unstable; urgency=low

  * Incorporate bugfix release 1.3a into the development branch.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Sun,  5 Mar 2000 14:23:07 +0200

grep-dctrl (1.4) unstable; urgency=low

  * debian/control [Standards-Version]: 3.1.1
     + debian/control [Build-Depends]: Added
  * debian/control [Description]: Improved.
  * debian/check-sourcedeps: Removed.
  * debian/rules [debian/build-depends.stamp]: Removed.
  * buffer.c, buffer.h: Make buffer_clear() an inline function.
  * grep-dctrl.c (main), matcher.h (struct matcher_t),
    matcher.c (grep_control): Implement the --count option
    suggested by Dirk Eddelbuettel.
  * configure.in, msg.h: Added a --enable-debug-level switch
  * matcher.c (slurp_paragraph): Rewrote for speed.
  * Versions 1.3 and 1.4 together closes: #57144.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Sun,  6 Feb 2000 21:42:30 +0200

grep-dctrl (1.3a) frozen; urgency=low

  * matcher.c (find_field): Unroll the first iteration of the first loop
    and then remove the special-case p==s if in the loop body. 
    Closes: bug#59455.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Sun,  5 Mar 2000 14:21:41 +0200

grep-dctrl (1.3) frozen; urgency=low

  * grep-dctrl.c (main): Add a colon after c in getopt's
    argument, fixing the segfault in bug#57144.  This fix is meant
    for frozen and is minimal; I will upload a more complicated fix
    (but more correct in the long run) separately to unstable, since
    the better fix requires feature changes.
  * grep-dctrl.c (print_usage, main), grep-dctrl.1.cp, po/fi.po:
    Deprecated short option "-c" to allow its meaning to be changed later
    in woody.  Functionality is not changed in this version; only
    messages about the deprecation have been added. This must go to
    potato to allow a smooth transition to the better fix for bug#57144.
  * debian/copyright: Updated copyright years (added 2000).
  * debian/NEWS: documented this release's changes

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Sun,  6 Feb 2000 14:50:06 +0200

grep-dctrl (1.2) unstable; urgency=low

  * grep-dctrl.c (main), matcher.h (struct matcher_t), matcher.c
    (grep_control): Implement the -v option suggested by David Coe.
    Closes: #45115.
  * debian/rules: Modernize.
      + Factor install into a variable.
      + Don't use install_gzip.
      + Use stamp files.
      + Split clean into {build,binary}-clean
      + Use a separate target for the configure call.
      + Don't test for rootness.
      + Remove $(rootdir) at start of binary targets.
  * grep-dctrl.1.cp: Documented the -v option.
  * debian/{prerm,postinst,rules}: Implement the /usr/doc transition method.
  * po/fi.po: Updated.
  * Compatibility: New file.
  * debian/rules: Install Compatibility.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Wed, 15 Sep 1999 20:06:20 +0300

grep-dctrl (1.1) unstable; urgency=low

  * matcher.c (grep_control): Only return on feof if the para is empty.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Mon,  2 Aug 1999 21:42:53 +0300

grep-dctrl (1.0) unstable; urgency=low

  * New major version.  No major changes, just polishing - we have
    been converging to 1.0 for some time now.
  * grep-dctrl.c (main): Don't allow -s to be used many times,
    as it does not work in the obvious way.
  * Updated the Finnish translation.
  * grep-dctrl.1.cp: Updated the DIAGNOSTICS section.
  * Added files TODO, NEWS and README to the source distribution.
    Only README is not relevant to Debian users, so not installing it.
  * configure.in: Check whether we have dpkg-parsechangelog, and
    use a default dummy version number if we don't.  This allows
    the package to build more easily on a non-Debian system.
  * Unsymlink things that had symlinks outside the source.
  * Added getopt source for the benefit of broken systems.
  * configure.in: Use /usr/share/common-licenses/GPL as a default for
    the copying file location.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Sat, 10 Jul 1999 20:58:46 +0300

grep-dctrl (0.16) unstable; urgency=low

  * Upgraded Standards-Version to 3.0.0.0, with necessary
    changes to debian/rules and debian/copyright.
  * configure.in: Added an anchor to the grep in the version number,
    finder, and reran autoconf

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Fri,  2 Jul 1999 10:42:24 +0300

grep-dctrl (0.15) unstable; urgency=low

  * Removed the file called "1" from the source package.
    Closes: bug#40358.
  * debian/dpkg-sourcedeps: New file.
  * debian/rules: Converted the source dependency check to use
    debian/dpkg-sourcedeps
  * grep-dctrl.1.cp: Wrote an EXAMPLES section.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Mon, 28 Jun 1999 18:02:36 +0300

grep-dctrl (0.14) unstable; urgency=low

  * matcher.c (grep_control): Test for EOF before a paragraph
    is processed, not after.  This fixes an unreported bug
    that caused grep-dctrl -sPackage '' output a spurious
    empty Package: line.
  * debian/rules: Added a simple source dependency check.
  * debian/rules: Use -isp with dpkg-gencontrol.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Sat, 26 Jun 1999 03:21:20 +0300

grep-dctrl (0.13) unstable; urgency=low

  * buffer.c (buffer_trim): I had ">=" in the loop
    condition, should be "<".  Corrected that; this
    fixes bug #38047.
  * Added debug_messages and asserts all over buffer.c
    while hunting bug #38047.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Thu, 20 May 1999 21:47:31 +0300

grep-dctrl (0.12) unstable; urgency=low

  * Removed old-Makefile.in from the tarball.
  * Updated Finnish translation.
  * Made field name matching ignore case.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Tue, 18 May 1999 08:53:42 +0300

grep-dctrl (0.11) unstable; urgency=low

  * Added shorthand option -P.
  * Fixed a typo in config file name in the manual page.
  * grep_dctrl (set_match_field): New function.
  * Fixed some -Wall warnings in matcher.c.
  * rc.c, line 107: Had forgotten the `++' in front of lineno.
    Corrected that.
  * Added the option -n for suppressing the field names on output.
  * Added a some informational messages to rcfile parsing.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Fri,  9 Apr 1999 20:24:30 +0300

grep-dctrl (0.10) unstable; urgency=low

  * Got rid of version.h.  The defines are now done on the
    compiler command line.  This will avoid the harmful rebuild of
    grep-dctrl.o in Makefile's install target. Fixes bug#35527.
  * Added the generated manual page to CLEANFILES, so that the
    manpage gets rebuilt.
  * Clean off backup files on debian/rules clean.
  * rc.c: Search user's rcfile first.
  * rc.c: Upgrade the "reading config file" message from debug message 
    to informational.
  * Updated the Finnish translation.
  * Prettified the long description in debian/control.
  * matcher.c: Downgraded several messages to the debug level `debug' so that
    the level `informational' becomes much less verbose.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Mon,  5 Apr 1999 23:35:39 +0300

grep-dctrl (0.9) unstable; urgency=low

  * Introduced a config file system for specifying default
    input file names based on the base name of argv[0].

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Wed, 24 Mar 1999 22:02:49 +0200

grep-dctrl (0.8) unstable; urgency=low

  * Rewrote build system to use autoconf & automake.
  * Internationalized.  Finnish translation is included.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Fri, 19 Mar 1999 11:07:15 +0200

grep-dctrl (0.7) unstable; urgency=low

  * Added an option for exact matches.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Tue,  9 Mar 1999 02:58:30 +0200

grep-dctrl (0.6) unstable; urgency=low

  * Strip whitespace at the start of a field body before searching in it.

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Mon,  8 Mar 1999 22:28:23 +0200

grep-dctrl (0.5) unstable; urgency=low

  * First released version.
  * This time the uploaded changes and .dsc are signed :-(

 -- Antti-Juhani Kaijanaho <ajk@debian.org>  Mon,  1 Mar 1999 22:10:01 +0200

